<html>
	<head>
		<style>
			table, th, td {
				border: 1px solid gray;
				border-collapse: collapse;
			}
		</style>
	</head>
	<body>
	<h2>0. Preface
		<table>
		<tr>
			<td><b>Thanks a lot to:</b></td>
			<td>
				<ol>
					<li>My family, friends.</li>
					<li><b>W. Richard Steven</b> - Unix Network Programming - Volume I, II. The books bring C/C++ programming career to me.</li>
					<li>My colluagues: Bùi Khánh Duy, Nguyễn Công Đức, ...</li>
				</ol>
			</td>
		</tr>
		<tr>
			<td><b>Purpose:</b></td>
			<td>
				<ol>
					<li>A C/C++ log is to support multithread.</li>
					<li>A pattern of designation of multi-thread, signaling.</li>
					<li>Without using third party except Posix APIs, Win32 APIs.</li>
					<li>Portable: Windows, Linux, Mac, Solaris, Android, iOs, ... </li>
					<li>Focus on simplicity.</li>
					<li>An sample following <b>W. Richard Steven</b> Unix Network Programming - Volume II, Part 3 - Synchroniation, Chapter 7, 8, 9, 10, 11.</li>
				</ol>
			</td>
		</tr>		
		</table>
	</h2>		
	<h2>1. Configuration and build (did test on x86_64)
		<table>
			<tr>
				<th>OS</th>
				<th>Tool/SDK</th>		
				<th>Steps</th>	
				<th>Prerequiste </th>					
			</tr>
			<tr>
				<td>Windows 10, 32 bits.</td>
				<td>Microsoft Visual Studio 2022</td>		
				<td>
					<ol>
						<li>Come <b>src</b> folder.</li>
						<li>Comment the macro <b>UNIX_LINUX</b> in <b>simplelog_config.h</b></br>
							<br><image src="image/Windows-00.png"></image>	
						</li>
						<li>Run: <b>cmake -G "Visual Studio 17 2022" -A win32 -B ../build32</b>.<br>"<b>../build32</b>" is an output folder.</li>
						<li>Move to the output folder "../build32" to build and run test.</li>
						<br><image src="image/win32-00.png"></image>
						<li>Copy <b>src/simpleplog.cfg</b> to ../build32</li>
					</ol>
				</td>
				<td><b>
					<ol>
						<li>cmake</b>, however, you can add the files ( from <b>src</b>) manually/directly. </li>
						<li>Visual Studio 2022 ( Community version or any.)</li>
					</ol>
				</td>				
			</tr>	
			<tr>
				<td>Windows 10, 64 bits. </td>
				<td>Microsoft Visual Studio 2022</td>		
				<td>
					<ol>
						<li>Come <b>src</b> folder.</li>
						<li>Comment the macro <b>UNIX_LINUX</b> in <b>simplelog_config.h</b></br>
							<br><image src="image/Windows-00.png"></image>
						</li>
						<li>Run: <b>cmake -G "Visual Studio 17 2022" -B ../build64</b>.<br>"<b>../build64</b>" is an output folder.</li>
						<li>Move to the output folder "../build64" to build and run test.</li>
						<br><image src="image/win64-00.png"></image>
						<li>Copy <b>src/simpleplog.cfg</b> to ../build64</li>
					</ol>
				</td>
				<td><b>
					<ol>
						<li>cmake</b>, however, you can add the files ( from <b>src</b>) manually/directly. </li>
						<li>Visual Studio 2022 ( Community version or any.)</li>
					</ol>
				</td>				
			</tr>	
			<tr>
				<td>Linux, 64 bits. </td>
				<td>gcc/g++</td>		
				<td>
					<ol>
						<li>Come to <b>src</b>, change the file.<br/><br/>
							<image src="image/linux-00.png"></image><br/><br/>
						</li>
						<li>Come <b>src/linux</b> folder.</li>
						<li>Run: <b>make</b>.</li>
						<br><image src="image/linux64-00.png"></image><br/><br/>
						<li>Copy <b>src/simpleplog.cfg</b> to <b>src/linux</b>.</li>
					</ol>
				</td>
				<td>
					<ol>
						<li>gcc/g++. </li>
						<li>POSIX, POSIX thread. </li>
					</ol>
				</td>				
			</tr>
			
		</table>
	</h2>
	<h2>2. Run
	</h2>
	<table>
		<tr>
			<th>OS </th>
			<th>Step </th>	
			<th>Note </th>				
		</tr>
		<tr>
			<td>Windows</td>
			<td>
				<ol>
					<li>Come to the output folder.</br></br>
						<image src="image/Windows-01.png"></image>
					</li>
					<li>Run: <b>simple_c_example.exe <i style="color:red;">2000</i></b></li>
					<li>Or run: <b>simple_cpp_example.exe <i style="color:red;">2000</i></b></li>
					<li>Output:<br/><br/>
						<image src="image/Windows-02.png"></image>
					</li>
				</ol>
			</td>	
			<td>
				<ol>
					<li><i style="color:red;">2000</i> is number of threads. </li>
					<li>Let's assess performance of the library/sample for yourself.</li>
				</ol>
			</td>				
		</tr><td>Linux</td>
			<td>
				<ol>
					<li>Come to the output:<br/><br/>
						<image src="image/linux-01.png"></image>
					</li>
					<li>Run: <b>./simpplelog_sample <i style="color:red;">2000</i></b>
					</li>
					<li>Run: <b>./simpplelog_cpp_sample <i style="color:red;">2000</i></b>
					</li>	
					<li>Output: <br/><br/><image src="image/linux-02.png"></image>
					</li>
				</ol>
			</td>
			<td>
				<ol>
					<li><i style="color:red;">2000</i> is number of threads. </li>
					<li>With <b>simpplelog_cpp_sample</b>, you have to <b>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:./</b> Because "simpplelog_cpp_sample" depends on 
						<i style="color:red;">libsimplelog.so</i>.
					</li>
					<li>Let's assess performance of the library/sample for yourself.</li>
				</ol>			
			</td>			
		<tr>			
		</tr>		
	</table>
	<h2>3. APIs manual
	</h2>	
	<table>
		<tr>
			<th>Index</th>
			<th>Name</th>
			<th>Description</th>
			<th>Thread-safe</th>
		</tr>
		<tr>
			<td>1</td>
			<td>int	<i style="color:brown;">spl_init_log</i>( char *<i style="color:gray;">pathcfg</i>)</td>
			<td>
				<ol>
					<li><i style="color:gray;">pathcfg</i>: The path to configuring file.<br/><br/><image src="image/config.png"></image>
					</li>
				</ol>
			</td>
			<td style="color:green;">Yes</td>
		</tr>		
		<tr>
			<td>2</td>
			<td><i style="color:brown;">spllog</i>(<i style="color:gray;">level</i>, <i style="color:gray;">fmt</i>, ...)</td>
			<td>
				Level is:<br/>
				<ol style="color:green;">
					<li>SPL_LOG_DEBUG	</li>
					<li>SPL_LOG_INFO	</li>
					<li>SPL_LOG_WARNING	</li>
					<li>SPL_LOG_ERROR	</li>
					<li>SPL_LOG_FATAL	</li>
					
				</ol>
			</td>
			<td style="color:green;">Yes</td>
		</tr>		
		<tr>
			<td>3</td>
			<td>int <i style="color:brown;">spl_finish_log</i>()</td>
			<td>
				Finish log.
			</td>
			<td style="color:green;">Yes</td>
		</tr>		
	</table>
	</body>
</html>